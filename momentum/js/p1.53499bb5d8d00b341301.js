(()=>{const e=document.querySelector(".time"),t=document.querySelector(".date"),n=document.querySelector(".weather-icon"),o=document.querySelector(".temperature"),a=document.querySelector(".weather-description"),r=document.querySelector(".wind"),c=document.querySelector(".humidity"),u=document.querySelector(".city"),m=document.querySelector(".weather-error"),d=document.querySelector(".greeting"),l={weekday:"long",month:"long",day:"numeric"};!function n(){const o=(new Date).toLocaleTimeString();e.textContent=o,function(){const e=(new Date).toLocaleDateString("ru-RU",l);t.textContent=e}(),d.textContent=function(){const e=(new Date).getHours();return e>=6&&e<12?"Доброе утро":e>=12&&e<18?"Добрый день":e>=18&&e<23?"Добрый вечер":"Спокойной ночи"}(),setTimeout(n,1e3)}(),window.addEventListener("beforeunload",(function(){let e=document.querySelector(".name");localStorage.setItem("name",e.value);let t=document.querySelector(".city");localStorage.setItem("city",t.value)})),window.addEventListener("load",(function(){let e=document.querySelector(".name");localStorage.getItem("name")&&(e.value=localStorage.getItem("name")),localStorage.getItem("city")&&(u.value=localStorage.getItem("city"))}));let i=(randomNum=Math.floor(20*Math.random())+1,randomNum<10?randomNum="0"+randomNum:+randomNum);const s=document.querySelector("body");let g="url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/",y=(new Date).getHours();async function h(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${u.value}&lang=ru&appid=b0cc2e3673bbe7bd786a938de77d3727&units=metric`,t=await fetch(e),d=await t.json();d.cod>=400&&d.cod<600?(n.className="",o.textContent="",a.textContent="",r.textContent="",c.textContent="",m.textContent="Город не введен"):(n.className="weather-icon owf",n.classList.add(`owf-${d.weather[0].id}`),o.textContent=`${d.main.temp.toFixed(0)}°C`,a.textContent=d.weather[0].description,r.textContent="Скорость ветра: "+d.wind.speed.toFixed(0)+" м/с",c.textContent="Влажность: "+d.main.humidity+" %",m.textContent="")}!function(){y=y>=6&&y<12?"morning":y>=12&&y<18?"afternoon":y>=18&&y<23?"evening":"night";const e=new Image;e.src="https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/"+y+"/"+i+".jpg",e.onload=()=>{s.style.backgroundImage=g+y+"/"+randomNum+".jpg"}}(),document.querySelector(".slide-next").addEventListener("click",(function(){randomNum++,randomNum<10&&(randomNum="0"+randomNum),21==randomNum&&(randomNum="01"),s.style.backgroundImage=g+y+"/"+randomNum+".jpg"})),document.querySelector(".slide-prev").addEventListener("click",(function(){randomNum--,randomNum<10&&(randomNum="0"+randomNum),"00"==randomNum&&(randomNum=20),s.style.backgroundImage=g+y+"/"+randomNum+".jpg"})),h(),u.addEventListener("change",(()=>h(u.value)));let S=[{text:"Пишите код так, как будто сопровождать его будет склонный к насилию психопат, который знает, где вы живете",author:"Стив Макконнелл"},{text:"Сложность программы растет до тех пор, пока не превысит способности программиста",author:"Артур Блох. Законы Мэрфи"},{text:"Ходить по воде и разрабатывать программы, следуя ТЗ, очень просто… если они заморожены",author:"И. Берард"}];const w=document.querySelector(".quote"),x=document.querySelector(".author"),q=document.querySelector(".change-quote");let N=Math.floor(3*Math.random());w.textContent=S[N].text,x.textContent=S[N].author,q.addEventListener("click",(function(){N++,N===S.length&&(N=0),async function(){w.textContent=S[N].text,x.textContent=S[N].author}()})),console.log("\n70/150\nЧасы и календарь +15\nПриветствие +10\nСмена фонового изображения +20\nВиджет погоды +15\nВиджет цитата дня +10")})();