(()=>{const e=document.querySelector(".time"),t=document.querySelector(".date"),n=document.querySelector(".weather-icon"),o=document.querySelector(".temperature"),a=document.querySelector(".weather-description"),r=document.querySelector(".wind"),c=document.querySelector(".humidity"),m=document.querySelector(".city"),u=document.querySelector(".weather-error"),d=document.querySelector(".greeting"),i={weekday:"long",month:"long",day:"numeric"};!function n(){const o=(new Date).toLocaleTimeString();e.textContent=o,function(){const e=(new Date).toLocaleDateString("ru-RU",i);t.textContent=e}(),d.textContent=function(){const e=(new Date).getHours();return e>=6&&e<12?"Доброе утро":e>=12&&e<18?"Добрый день":e>=18&&e<23?"Добрый вечер":"Спокойной ночи"}(),setTimeout(n,1e3)}(),window.addEventListener("beforeunload",(function(){let e=document.querySelector(".name");localStorage.setItem("name",e.value);let t=document.querySelector(".city");localStorage.setItem("city",t.value)})),window.addEventListener("load",(function(){let e=document.querySelector(".name");localStorage.getItem("name")&&(e.value=localStorage.getItem("name")),localStorage.getItem("city")&&(m.value=localStorage.getItem("city"))}));let l=(randomNum=Math.floor(20*Math.random())+1,randomNum<10?randomNum="0"+randomNum:+randomNum);const s=document.querySelector("body");let g="url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/",y=(new Date).getHours();async function w(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${m.value}&lang=ru&appid=b0cc2e3673bbe7bd786a938de77d3727&units=metric`,t=await fetch(e),d=await t.json();d.cod>=400&&d.cod<600?(n.className="",o.textContent="",a.textContent="",r.textContent="",c.textContent="",u.textContent="Город не введен"):(n.className="weather-icon owf",n.classList.add(`owf-${d.weather[0].id}`),o.textContent=`${d.main.temp.toFixed(0)}°C`,a.textContent=d.weather[0].description,r.textContent="Скорость ветра: "+d.wind.speed.toFixed(0)+" м/с",c.textContent="Влажность: "+d.main.humidity+" %",u.textContent="")}!function(){y=y>=6&&y<12?"morning":y>=12&&y<18?"afternoon":y>=18&&y<23?"evening":"night";const e=new Image;e.src="https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/"+y+"/"+l+".jpg",e.onload=()=>{s.style.backgroundImage=g+y+"/"+randomNum+".jpg"}}(),document.querySelector(".slide-next").addEventListener("click",(function(){randomNum++,randomNum<10&&(randomNum="0"+randomNum),21==randomNum&&(randomNum="01"),s.style.backgroundImage=g+y+"/"+randomNum+".jpg"})),document.querySelector(".slide-prev").addEventListener("click",(function(){randomNum--,randomNum<10&&(randomNum="0"+randomNum),"00"==randomNum&&(randomNum=20),s.style.backgroundImage=g+y+"/"+randomNum+".jpg"})),w(),m.addEventListener("change",(()=>w(m.value)))})();